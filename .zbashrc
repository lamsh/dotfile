## path
### Only running interactively, valid local development PATH
if [[ "$-" = *i* ]]; then
  ### system path
  export LD_LIBRARY_PATH="/usr/local/lib:/usr/lib:$LD_LIBRARY_PATH"
  # export CPATH="/usr/local/include:/usr/include:$CPATH"

  ### local install path
  LOCAL="${HOME}/local"
  export PATH="${LOCAL}/bin:$PATH"
  export LD_LIBRARY_PATH="${LOCAL}/lib:$LD_LIBRARY_PATH"
  export CPATH="${LOCAL}/include:$CPATH"
  export MANPATH="${LOCAL}/man:${LOCAL}/share/man:$MANPATH"
  export INFOPATH="${LOCAL}/info:${LOCAL}/share/info:$INFOPATH"

  export PKG_CONFIG_PATH="${LOCAL}/lib/pkgconfig:${PKG_CONFIG_PATH}"

  export GEM_HOME="${LOCAL}" # ruby gem
  export PYTHONUSERBASE="${LOCAL}" # python pip
  ## MSYS2 local Python PATH
  # if [ $PYTHONPATH ]; then
  #   export PYTHONPATH="${LOCAL/\/[a-z]/}/lib/python3.4/site-packages:$PYTHONPATH"
  # else
  #   export PYTHONPATH="${LOCAL/\/[a-z]/}/lib/python3.4/site-packages"
  # fi

  ## invalid stty keybind
  stty start undef
fi

export DEBFULLNAME="Ken SENOO"
export DEBEMAIL="mslamsh20131029@outlook.jp"

## locale
export LANG=ja_JP.UTF-8
export LANGUAGE=en
export LC_TIME=en_US.UTF-8
export LC_MESSAGES=en_US.UTF-8

[ -n ${DISPLAY} ] && export DISPLAY=:0.0

## For wget proxy
# export HTTP_PROXY="proxy.kuins.net:8080"
# export http_proxy="http://proxy.kuins.net:8080/"
# export ftp_proxy="http://proxy.kuins.net:8080/"

## enable alias in non-interactive shell
shell=$(readlink /proc/$$/exe)
case $shell in
  *bash) shopt -s expand_aliases;;
  # *zsh) setopt aliases;;
esac

## alias

### Windows character encoding convert
if [ "${OS}" = "Windows_NT" ]; then
  function wincmd(){
    CMD=$1
    shift
    $CMD $* 2>&1 | iconv -f cp932 -t utf-8
  }

  alias ipconfig='wincmd ipconfig'
  alias netstat='wincmd netstat'
  alias netsh='wincmd netsh'
  alias taskkill='wincmd taskkill'
  alias cs="wincmd cscript.exe -NoLogo"
  alias ws="wincmd wscript.exe -NoLogo"
  alias choco="wincmd choco"
fi

### ls
alias ls="ls -AFh --color=auto"
alias ll="ls -Gl --time-style=+'%Y-%m-%d %H:%M'"
alias l="ls"
[ -r ~/.dir_colors ] && eval "$(dircolors ~/.dir_colors)"

### Default to human readable figures
alias df='df -h'
alias du='du -h'
alias ps="ps w"

# alias emacs="emacs -nw"

### Git
alias gic="git commit -am"
alias gia="git add"
alias gim="git mv"

### open
alias o="open"
case "${OSTYPE}" in
  freebsd*|darwin*) alias o="open" ;;
  linux*)           alias open="xdg-open" ;; # alias open="gnome-open";;
  cygwin*)          alias open="cygstart" ;;
  msys*)            alias open="start";;
esac

#### Copy to clipboard
[ "$(command -v clip)" ]    && alias clip="iconv -s -f UTF-8 -t SJIS | clip" # MSYS (Windows)
[ "$(command -v xsel)" ]    && alias clip="xsel -ib" # Linux
[ "$(command -v putclip)" ] && alias clip="putclip" # Cygwin
[ "$(command -v pbcopy)" ]  && alias clip="pbcopy" # Mac

### development
alias py='python3'
alias py2='python2'
alias py3='python3'
alias ipy='ipython3'
alias ipy2='ipython2'
alias ipy3='ipython3'
alias rb='ruby'
alias gp='g++ -Wall -std=c++1y'
alias gc='gcc -Wall -std=gnu11'
alias gf='gfortran -Wall -O3 -static'
[ "$(command -v xstow)" ] && alias stow=xstow
## stow conflict list
# --ignore="dir|gschemas.compiled|icon-theme-cache"
alias stow="stow --ignore='dir|gschemas.compiled|icon-theme.cache'"
cmd="pkg-config --cflags --libs gtk+-3.0"
eval "${cmd}" > /dev/null 2>&1 && GTK="$(eval ${cmd})"

## grep 2.21 later, deprecated GREP_OPTIONS environmental variable
GREP_OPTIONS="--color=auto -I --exclude-dir={.,..,.git,.svn}"
GREP_OPTIONS+=" --exclude={tags,GTAGS,GRTAGS,GPATH}"
alias grep="grep ${GREP_OPTIONS}"

alias vim="vim -X"
[ "$(command -v vim)" ] && export EDITOR=vim
export SVN_EDITOR=$EDITOR
export GNUPLOT_LIB=""  # data or script path
export CYGWIN="nodosfilewarning winsymlinks:nativestrict"
export MSYS="winsymlinks:nativestrict"

## compile
# zshでは{=var}というようにして空白区切りで展開して使う。じゃないと使えない
export LIBCPP="-static-libgcc -static-libstdc++" # 標準ライブラリの埋め込み
# [ "$(command -v wx-config)" ] && WXCONFIG="$(wx-config --cppflags --libs | tr \"\n\" ' ')" # wxwidgetsのコンパイルフラグ

## Pager
export PAGER="less"
[ "$(command -v lv)" ] && export PAGER=lv
export LV="-c -l"
export LESS="-imR"
alias info="info --vi-keys"

## for wine
export WINEARCH=win32
export WINEPREFIX=~/.wine32

## terminal title
case "${TERM}" in
  ?term*|rxvt*|screen) PROMPT_COMMAND='echo -ne "\033]0;$0@${HOSTNAME:=$(hostname)}: ${PWD/$HOME/"~"}\007"';;
esac

## for other individual setting
[ -r ~/.otherrc ] && source ~/.otherrc
